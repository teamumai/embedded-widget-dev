<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>STAGING widget</title>
  <meta name="description" content="STAGING widget embedded in restaurant website" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!--
  Important Note for Users:
  Copy and paste this script into your website's HTML.
  Place it in either the <head> or <body> section of your website's HTML document. 
  Ensure that you only place this script once per page/website to avoid duplicate executions.
-->
  <script>
    const params = new URL(document.location).searchParams;
    const script = document.createElement("script");
    script.src = "https://widgetstaging.letsumai.com/dist/embed.min.js";
    script.setAttribute("data-api-key", params.get("apiKey") || "fccdb18c-349d-43bc-bc01-f845270dfc8e");
    script.setAttribute("data-widget-type", "reservation");
    document.head.appendChild(script);
  </script>
  
  <!--
Important Note for Users:
Its required to Copy and Paste this script into your website's HTML, in order for UMAI to work on your website.
Place it in either the <head> or <body> section of your website's HTML document. 
Ensure that you only place this script once per page/website to avoid duplicate executions.
-->
<script src="https://widgetstaging.letsumai.com/dist/embed.min.js" data-api-key="fccdb18c-349d-43bc-bc01-f845270dfc8e" data-widget-type="reservation"></script>
<script type="text/javascript">
function init() {
  /**
   * Explanation for users:
   * - Enter button selectors (IDs or classes) are comma-separated list without spaces and match button on your page.
   * - Button selectors must be valid according to the CSS selector rules used by `querySelectorAll`.
   *
   * Valid formats:
   * - IDs: #button1 or #button2
   * - Classes: .btn1 or .btn-custom
   * - Attribute selectors: [id="specialButton"]
   *
   * For details on valid CSS selector syntax, see:
   * https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll
   */
  
  ["#umai-reservation-button"].forEach((id) => {
    // Use `document.querySelectorAll` to find all elements matching the CSS selector in the reservation custom button input.
    const links = document.querySelectorAll(id);
    links.forEach((link) => {
      // Attach a click event listener to each reservation element.
      link.addEventListener("click", function (e) {
        e.preventDefault();
        // Configure the `umaiWidget` with the provided `apiKey` and `widgetType`.
        umaiWidget.config({ apiKey: "fccdb18c-349d-43bc-bc01-f845270dfc8e", widgetType: "reservation" });
        // Open the reservation widget modal when an element is clicked.
        umaiWidget.openWidget();
        return false;
      }); 
    });
  });

  ["#umai-giftcard-button"].forEach((id) => {
    // Use `document.querySelectorAll` to find all elements matching the CSS selector in the giftcard custom button input.
    const links = document.querySelectorAll(id);
    links.forEach((link) => {
      // Attach a click event listener to each giftcard element.
      link.addEventListener("click", function (e) {
        e.preventDefault();
        // Configure the `umaiWidget` with the provided `apiKey` and `widgetType`.
        umaiWidget.config({ apiKey: "fccdb18c-349d-43bc-bc01-f845270dfc8e", widgetType: "giftcard" });
        // Open the giftcard widget modal when an element is clicked.
        umaiWidget.openWidget();
        return false;
      }); 
    });
  });

  ["#umai-takeaway-button"].forEach((id) => {
    // Use `document.querySelectorAll` to find all elements matching the CSS selector in the takeaway custom button input.
    const links = document.querySelectorAll(id);
    links.forEach((link) => {
      // Attach a click event listener to each takeaway element.
      link.addEventListener("click", function (e) {
        e.preventDefault();
        // Configure the `umaiWidget` with the provided `apiKey` and `widgetType`.
        umaiWidget.config({ apiKey: "fccdb18c-349d-43bc-bc01-f845270dfc8e", widgetType: "takeaway" });
        // Open the takeaway widget modal when an element is clicked.
        umaiWidget.openWidget();
        return false;
      }); 
    });
  });
}
/**
 * Attaching `init` function when the page has fully loaded.
 * It sets up event listeners for specific elements that match the provided custom button.
 * Each matching element will trigger the `umaiWidget` with a specified configuration when clicked.
 */
document.addEventListener("DOMContentLoaded", init);
window.addEventListener("mercury:load", init);
</script>

</head>

<body style="background-color: #f4f4f4;">
  <h1>STAGING</h1>
  <h2>Welcome to my Restaurant!</h2>
  <button type="button" id="umai-reservation-button">Make a reservation!</button>
  <button type="button" id="umai-giftcard-button">Buy a Giftcard!</button>
  <button type="button" id="umai-takeaway-button">Make an Online Order!</button>
  
  <button type="button" onclick="throwError()">Throw error</button>
  <script>
    // Testing whether Sentry is disabled when the widget is closed
    function throwError() {
      throw new Error(
        "This is an error thrown from the restaurant website and should not be tracked by Sentry"
      );
    }
  </script>
</body>

</html>
